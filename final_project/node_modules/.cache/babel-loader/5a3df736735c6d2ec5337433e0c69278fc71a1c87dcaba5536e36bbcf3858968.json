{"ast":null,"code":"import proj4 from \"proj4\";\nexport async function fetchRealStations() {\n  try {\n    var _json$response, _json$response$body, _json$response$body$i;\n    const response = await fetch(\"http://localhost:4000/api/charging\");\n    const json = await response.json();\n    const items = json === null || json === void 0 ? void 0 : (_json$response = json.response) === null || _json$response === void 0 ? void 0 : (_json$response$body = _json$response.body) === null || _json$response$body === void 0 ? void 0 : (_json$response$body$i = _json$response$body.items) === null || _json$response$body$i === void 0 ? void 0 : _json$response$body$i.item;\n    if (!items) return [];\n\n    // -----------------------------\n    // ðŸ“Œ ì•ˆì „ì§€ë„ TM ì¢Œí‘œê³„ â†’ WGS84\n    // EPSG:5186 (ì¤‘ë¶€ì›ì  TM)\n    // -----------------------------\n    const TM_5186 = \"+proj=tmerc +lat_0=38 +lon_0=127.5 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs\";\n    const WGS84 = \"+proj=longlat +datum=WGS84 +no_defs\";\n\n    // -----------------------------\n    // ðŸ“Œ ê° ì¶©ì „ì†Œ ë°ì´í„° ë³€í™˜\n    // -----------------------------\n    return items.map(item => {\n      console.log(\"ðŸ“Œ ì›ë³¸ ì¢Œí‘œ:\", item.X, item.Y);\n\n      // ì¢Œí‘œ ë³€í™˜ ìˆ˜í–‰\n      const [lng, lat] = proj4(TM_5186, WGS84, [Number(item.X), Number(item.Y)]);\n      console.log(\"âž¡ï¸ ë³€í™˜ëœ ì¢Œí‘œ:\", lat, lng);\n      return {\n        id: item.OBJT_ID,\n        name: item.STAT_NM,\n        address: item.ADRES,\n        company: item.BUSI_NM,\n        chargerType: item.CHGER_TY,\n        // ðŸ“Œ ë³€í™˜ëœ ì¢Œí‘œ ì ìš©\n        latitude: lat,\n        longitude: lng,\n        // safemap APIì—ëŠ” ìƒíƒœê°€ ì—†ìœ¼ë¯€ë¡œ ìž„ì˜ ì„¤ì •\n        status: \"available\"\n      };\n    });\n  } catch (err) {\n    console.error(\"SafeMap API Error:\", err);\n    throw new Error(\"ì‹¤ì œ API í˜¸ì¶œ ì‹¤íŒ¨\");\n  }\n}\nexport const EvDataService = {\n  async getStations() {\n    return await fetchRealStations();\n  },\n  filterStations(stations, filters) {\n    return stations.filter(s => true); // í˜„ìž¬ í•„í„° ê¸°ëŠ¥ ë¹„í™œì„±\n  }\n};","map":{"version":3,"names":["proj4","fetchRealStations","_json$response","_json$response$body","_json$response$body$i","response","fetch","json","items","body","item","TM_5186","WGS84","map","console","log","X","Y","lng","lat","Number","id","OBJT_ID","name","STAT_NM","address","ADRES","company","BUSI_NM","chargerType","CHGER_TY","latitude","longitude","status","err","error","Error","EvDataService","getStations","filterStations","stations","filters","filter","s"],"sources":["/Users/jihongkim/Desktop/OSS_Final/src/components/ev/EvDataService.js"],"sourcesContent":["import proj4 from \"proj4\";\n\nexport async function fetchRealStations() {\n  try {\n    const response = await fetch(\"http://localhost:4000/api/charging\");\n    const json = await response.json();\n\n    const items = json?.response?.body?.items?.item;\n    if (!items) return [];\n\n    // -----------------------------\n    // ðŸ“Œ ì•ˆì „ì§€ë„ TM ì¢Œí‘œê³„ â†’ WGS84\n    // EPSG:5186 (ì¤‘ë¶€ì›ì  TM)\n    // -----------------------------\n    const TM_5186 =\n      \"+proj=tmerc +lat_0=38 +lon_0=127.5 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs\";\n\n    const WGS84 = \"+proj=longlat +datum=WGS84 +no_defs\";\n\n    // -----------------------------\n    // ðŸ“Œ ê° ì¶©ì „ì†Œ ë°ì´í„° ë³€í™˜\n    // -----------------------------\n    return items.map((item) => {\n      console.log(\"ðŸ“Œ ì›ë³¸ ì¢Œí‘œ:\", item.X, item.Y);\n\n      // ì¢Œí‘œ ë³€í™˜ ìˆ˜í–‰\n      const [lng, lat] = proj4(TM_5186, WGS84, [\n        Number(item.X),\n        Number(item.Y),\n      ]);\n\n      console.log(\"âž¡ï¸ ë³€í™˜ëœ ì¢Œí‘œ:\", lat, lng);\n\n      return {\n        id: item.OBJT_ID,\n        name: item.STAT_NM,\n        address: item.ADRES,\n        company: item.BUSI_NM,\n        chargerType: item.CHGER_TY,\n\n        // ðŸ“Œ ë³€í™˜ëœ ì¢Œí‘œ ì ìš©\n        latitude: lat,\n        longitude: lng,\n\n        // safemap APIì—ëŠ” ìƒíƒœê°€ ì—†ìœ¼ë¯€ë¡œ ìž„ì˜ ì„¤ì •\n        status: \"available\",\n      };\n    });\n  } catch (err) {\n    console.error(\"SafeMap API Error:\", err);\n    throw new Error(\"ì‹¤ì œ API í˜¸ì¶œ ì‹¤íŒ¨\");\n  }\n}\n\nexport const EvDataService = {\n  async getStations() {\n    return await fetchRealStations();\n  },\n\n  filterStations(stations, filters) {\n    return stations.filter((s) => true); // í˜„ìž¬ í•„í„° ê¸°ëŠ¥ ë¹„í™œì„±\n  },\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,eAAeC,iBAAiBA,CAAA,EAAG;EACxC,IAAI;IAAA,IAAAC,cAAA,EAAAC,mBAAA,EAAAC,qBAAA;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,oCAAoC,CAAC;IAClE,MAAMC,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAI,CAAC,CAAC;IAElC,MAAMC,KAAK,GAAGD,IAAI,aAAJA,IAAI,wBAAAL,cAAA,GAAJK,IAAI,CAAEF,QAAQ,cAAAH,cAAA,wBAAAC,mBAAA,GAAdD,cAAA,CAAgBO,IAAI,cAAAN,mBAAA,wBAAAC,qBAAA,GAApBD,mBAAA,CAAsBK,KAAK,cAAAJ,qBAAA,uBAA3BA,qBAAA,CAA6BM,IAAI;IAC/C,IAAI,CAACF,KAAK,EAAE,OAAO,EAAE;;IAErB;IACA;IACA;IACA;IACA,MAAMG,OAAO,GACX,gGAAgG;IAElG,MAAMC,KAAK,GAAG,qCAAqC;;IAEnD;IACA;IACA;IACA,OAAOJ,KAAK,CAACK,GAAG,CAAEH,IAAI,IAAK;MACzBI,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEL,IAAI,CAACM,CAAC,EAAEN,IAAI,CAACO,CAAC,CAAC;;MAExC;MACA,MAAM,CAACC,GAAG,EAAEC,GAAG,CAAC,GAAGnB,KAAK,CAACW,OAAO,EAAEC,KAAK,EAAE,CACvCQ,MAAM,CAACV,IAAI,CAACM,CAAC,CAAC,EACdI,MAAM,CAACV,IAAI,CAACO,CAAC,CAAC,CACf,CAAC;MAEFH,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEI,GAAG,EAAED,GAAG,CAAC;MAEnC,OAAO;QACLG,EAAE,EAAEX,IAAI,CAACY,OAAO;QAChBC,IAAI,EAAEb,IAAI,CAACc,OAAO;QAClBC,OAAO,EAAEf,IAAI,CAACgB,KAAK;QACnBC,OAAO,EAAEjB,IAAI,CAACkB,OAAO;QACrBC,WAAW,EAAEnB,IAAI,CAACoB,QAAQ;QAE1B;QACAC,QAAQ,EAAEZ,GAAG;QACba,SAAS,EAAEd,GAAG;QAEd;QACAe,MAAM,EAAE;MACV,CAAC;IACH,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZpB,OAAO,CAACqB,KAAK,CAAC,oBAAoB,EAAED,GAAG,CAAC;IACxC,MAAM,IAAIE,KAAK,CAAC,cAAc,CAAC;EACjC;AACF;AAEA,OAAO,MAAMC,aAAa,GAAG;EAC3B,MAAMC,WAAWA,CAAA,EAAG;IAClB,OAAO,MAAMrC,iBAAiB,CAAC,CAAC;EAClC,CAAC;EAEDsC,cAAcA,CAACC,QAAQ,EAAEC,OAAO,EAAE;IAChC,OAAOD,QAAQ,CAACE,MAAM,CAAEC,CAAC,IAAK,IAAI,CAAC,CAAC,CAAC;EACvC;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}