{"ast":null,"code":"import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport { EPSLN, HALF_PI } from '../constants/values';\nimport asinz from '../common/asinz';\n\n/**\n * @typedef {Object} LocalThis\n * @property {Array<number>} en\n * @property {number} n\n * @property {number} m\n * @property {number} C_y\n * @property {number} C_x\n * @property {number} es\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  /* Place parameters in static storage for common use\n    ------------------------------------------------- */\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  } else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  ----------------------------------------------------- */\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    ----------------- */\n  lon = adjust_lon(lon - this.long0, this.over);\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    } else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n  } else {\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\nexport function inverse(p) {\n  var lat, temp, lon, s;\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    } else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0, this.over);\n    lat = adjust_lat(lat);\n  } else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      // temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp, this.over);\n    } else if (s - EPSLN < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\nexport var names = ['Sinusoidal', 'sinu'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};","map":{"version":3,"names":["adjust_lon","adjust_lat","pj_enfn","MAX_ITER","pj_mlfn","pj_inv_mlfn","EPSLN","HALF_PI","asinz","init","sphere","en","es","n","m","C_y","Math","sqrt","C_x","forward","p","x","y","lon","lat","long0","over","asin","sin","k","i","V","cos","abs","a","s","c","inverse","temp","x0","y0","names"],"sources":["/Users/jihongkim/Desktop/OSS_Final/node_modules/proj4/lib/projections/sinu.js"],"sourcesContent":["import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport { EPSLN, HALF_PI } from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/**\n * @typedef {Object} LocalThis\n * @property {Array<number>} en\n * @property {number} n\n * @property {number} m\n * @property {number} C_y\n * @property {number} C_x\n * @property {number} es\n */\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  /* Place parameters in static storage for common use\n    ------------------------------------------------- */\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  } else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  ----------------------------------------------------- */\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    ----------------- */\n  lon = adjust_lon(lon - this.long0, this.over);\n\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    } else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n  } else {\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var lat, temp, lon, s;\n\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    } else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0, this.over);\n    lat = adjust_lat(lat);\n  } else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      // temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp, this.over);\n    } else if ((s - EPSLN) < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['Sinusoidal', 'sinu'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}