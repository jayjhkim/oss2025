{"ast":null,"code":"import adjust_lon from '../common/adjust_lon';\nimport { EPSLN } from '../constants/values';\n\n/** @this {import('../defs.js').ProjectionDefinition} */\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n}\n\n/* Mollweide forward equations--mapping lat,long to x,y\n    ---------------------------------------------------- */\nexport function forward(p) {\n  /* Forward equations\n      ----------------- */\n  var lon = p.x;\n  var lat = p.y;\n  var delta_lon = adjust_lon(lon - this.long0, this.over);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      ----------------------------------------------------- */\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       -------------------------------------------------------------------------- */\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n  p.x = x;\n  p.y = y;\n  return p;\n}\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      ----------------- */\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       ------------------------------------------------------------------- */\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + p.x / (0.900316316158 * this.a * Math.cos(theta)), this.over);\n  if (lon < -Math.PI) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\nexport var names = ['Mollweide', 'moll'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};","map":{"version":3,"names":["adjust_lon","EPSLN","init","x0","undefined","y0","long0","forward","p","lon","x","lat","y","delta_lon","over","theta","con","Math","PI","sin","delta_theta","cos","abs","a","inverse","arg","asin","names"],"sources":["/Users/jihongkim/Desktop/OSS_Final/node_modules/proj4/lib/projections/moll.js"],"sourcesContent":["import adjust_lon from '../common/adjust_lon';\nimport { EPSLN } from '../constants/values';\n\n/** @this {import('../defs.js').ProjectionDefinition} */\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n}\n\n/* Mollweide forward equations--mapping lat,long to x,y\n    ---------------------------------------------------- */\nexport function forward(p) {\n  /* Forward equations\n      ----------------- */\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0, this.over);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      ----------------------------------------------------- */\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       -------------------------------------------------------------------------- */\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      ----------------- */\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       ------------------------------------------------------------------- */\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))), this.over);\n  if (lon < (-Math.PI)) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = ['Mollweide', 'moll'];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n"],"mappings":"AAAA,OAAOA,UAAU,MAAM,sBAAsB;AAC7C,SAASC,KAAK,QAAQ,qBAAqB;;AAE3C;AACA,OAAO,SAASC,IAAIA,CAAA,EAAG;EACrB,IAAI,CAACC,EAAE,GAAG,IAAI,CAACA,EAAE,KAAKC,SAAS,GAAG,IAAI,CAACD,EAAE,GAAG,CAAC;EAC7C,IAAI,CAACE,EAAE,GAAG,IAAI,CAACA,EAAE,KAAKD,SAAS,GAAG,IAAI,CAACC,EAAE,GAAG,CAAC;EAC7C,IAAI,CAACC,KAAK,GAAG,IAAI,CAACA,KAAK,KAAKF,SAAS,GAAG,IAAI,CAACE,KAAK,GAAG,CAAC;AACxD;;AAEA;AACA;AACA,OAAO,SAASC,OAAOA,CAACC,CAAC,EAAE;EACzB;AACF;EACE,IAAIC,GAAG,GAAGD,CAAC,CAACE,CAAC;EACb,IAAIC,GAAG,GAAGH,CAAC,CAACI,CAAC;EAEb,IAAIC,SAAS,GAAGb,UAAU,CAACS,GAAG,GAAG,IAAI,CAACH,KAAK,EAAE,IAAI,CAACQ,IAAI,CAAC;EACvD,IAAIC,KAAK,GAAGJ,GAAG;EACf,IAAIK,GAAG,GAAGC,IAAI,CAACC,EAAE,GAAGD,IAAI,CAACE,GAAG,CAACR,GAAG,CAAC;;EAEjC;AACF;EACE,OAAO,IAAI,EAAE;IACX,IAAIS,WAAW,GAAG,EAAEL,KAAK,GAAGE,IAAI,CAACE,GAAG,CAACJ,KAAK,CAAC,GAAGC,GAAG,CAAC,IAAI,CAAC,GAAGC,IAAI,CAACI,GAAG,CAACN,KAAK,CAAC,CAAC;IAC1EA,KAAK,IAAIK,WAAW;IACpB,IAAIH,IAAI,CAACK,GAAG,CAACF,WAAW,CAAC,GAAGnB,KAAK,EAAE;MACjC;IACF;EACF;EACAc,KAAK,IAAI,CAAC;;EAEV;AACF;AACA;EACE,IAAIE,IAAI,CAACC,EAAE,GAAG,CAAC,GAAGD,IAAI,CAACK,GAAG,CAACX,GAAG,CAAC,GAAGV,KAAK,EAAE;IACvCY,SAAS,GAAG,CAAC;EACf;EACA,IAAIH,CAAC,GAAG,cAAc,GAAG,IAAI,CAACa,CAAC,GAAGV,SAAS,GAAGI,IAAI,CAACI,GAAG,CAACN,KAAK,CAAC,GAAG,IAAI,CAACZ,EAAE;EACvE,IAAIS,CAAC,GAAG,eAAe,GAAG,IAAI,CAACW,CAAC,GAAGN,IAAI,CAACE,GAAG,CAACJ,KAAK,CAAC,GAAG,IAAI,CAACV,EAAE;EAE5DG,CAAC,CAACE,CAAC,GAAGA,CAAC;EACPF,CAAC,CAACI,CAAC,GAAGA,CAAC;EACP,OAAOJ,CAAC;AACV;AAEA,OAAO,SAASgB,OAAOA,CAAChB,CAAC,EAAE;EACzB,IAAIO,KAAK;EACT,IAAIU,GAAG;;EAEP;AACF;EACEjB,CAAC,CAACE,CAAC,IAAI,IAAI,CAACP,EAAE;EACdK,CAAC,CAACI,CAAC,IAAI,IAAI,CAACP,EAAE;EACdoB,GAAG,GAAGjB,CAAC,CAACI,CAAC,IAAI,eAAe,GAAG,IAAI,CAACW,CAAC,CAAC;;EAEtC;AACF;AACA;EACE,IAAIN,IAAI,CAACK,GAAG,CAACG,GAAG,CAAC,GAAG,cAAc,EAAE;IAClCA,GAAG,GAAG,cAAc;EACtB;EACAV,KAAK,GAAGE,IAAI,CAACS,IAAI,CAACD,GAAG,CAAC;EACtB,IAAIhB,GAAG,GAAGT,UAAU,CAAC,IAAI,CAACM,KAAK,GAAIE,CAAC,CAACE,CAAC,IAAI,cAAc,GAAG,IAAI,CAACa,CAAC,GAAGN,IAAI,CAACI,GAAG,CAACN,KAAK,CAAC,CAAE,EAAE,IAAI,CAACD,IAAI,CAAC;EACjG,IAAIL,GAAG,GAAI,CAACQ,IAAI,CAACC,EAAG,EAAE;IACpBT,GAAG,GAAG,CAACQ,IAAI,CAACC,EAAE;EAChB;EACA,IAAIT,GAAG,GAAGQ,IAAI,CAACC,EAAE,EAAE;IACjBT,GAAG,GAAGQ,IAAI,CAACC,EAAE;EACf;EACAO,GAAG,GAAG,CAAC,CAAC,GAAGV,KAAK,GAAGE,IAAI,CAACE,GAAG,CAAC,CAAC,GAAGJ,KAAK,CAAC,IAAIE,IAAI,CAACC,EAAE;EACjD,IAAID,IAAI,CAACK,GAAG,CAACG,GAAG,CAAC,GAAG,CAAC,EAAE;IACrBA,GAAG,GAAG,CAAC;EACT;EACA,IAAId,GAAG,GAAGM,IAAI,CAACS,IAAI,CAACD,GAAG,CAAC;EAExBjB,CAAC,CAACE,CAAC,GAAGD,GAAG;EACTD,CAAC,CAACI,CAAC,GAAGD,GAAG;EACT,OAAOH,CAAC;AACV;AAEA,OAAO,IAAImB,KAAK,GAAG,CAAC,WAAW,EAAE,MAAM,CAAC;AACxC,eAAe;EACbzB,IAAI,EAAEA,IAAI;EACVK,OAAO,EAAEA,OAAO;EAChBiB,OAAO,EAAEA,OAAO;EAChBG,KAAK,EAAEA;AACT,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}