{"ast":null,"code":"// src/components/ev/EvDataService.js\n\nconst R = 6378137; // Web Mercator ë°˜ì§€ë¦„ (WGS84)\n\n// Safemap Web Mercator â†’ ìœ„ë„/ê²½ë„ ë³€í™˜\nfunction webMercatorToLatLng(x, y) {\n  const lon = x / R * (180 / Math.PI);\n  const lat = (2 * Math.atan(Math.exp(y / R)) - Math.PI / 2) * (180 / Math.PI);\n  return {\n    lat,\n    lng: lon\n  };\n}\n\n// Safemap API í”„ë¡ì‹œ í˜¸ì¶œ\nexport async function fetchRealStations() {\n  try {\n    var _json$response, _json$response$body, _json$response$body$i;\n    const response = await fetch(\"http://localhost:4000/api/charging\");\n    const json = await response.json();\n    const items = json === null || json === void 0 ? void 0 : (_json$response = json.response) === null || _json$response === void 0 ? void 0 : (_json$response$body = _json$response.body) === null || _json$response$body === void 0 ? void 0 : (_json$response$body$i = _json$response$body.items) === null || _json$response$body$i === void 0 ? void 0 : _json$response$body$i.item;\n    if (!items) {\n      console.warn(\"âš ï¸ Safemap items ì—†ìŒ:\", json);\n      return [];\n    }\n\n    // ------------------------------------------------------------\n    // ğŸ”¥ STAT_ID ê¸°ì¤€ìœ¼ë¡œ ì¶©ì „ì†Œ ë³‘í•© êµ¬ì¡° ìƒì„±\n    // ------------------------------------------------------------\n    const merged = {};\n    for (const item of items) {\n      const x = Number(item.X);\n      const y = Number(item.Y);\n\n      // ì¢Œí‘œ ìœ íš¨ì„± ê²€ì‚¬\n      if (!x || !y || Number.isNaN(x) || Number.isNaN(y)) continue;\n\n      // ì¢Œí‘œ ë³€í™˜\n      const {\n        lat,\n        lng\n      } = webMercatorToLatLng(x, y);\n\n      // í•œêµ­ ë²”ìœ„ ë²—ì–´ë‚˜ë©´ ìŠ¤í‚µ\n      if (lat < 30 || lat > 45 || lng < 120 || lng > 135) continue;\n      const key = item.STAT_ID;\n\n      // ì¶©ì „ì†Œ ìµœì´ˆ ìƒì„±\n      if (!merged[key]) {\n        merged[key] = {\n          id: key,\n          name: item.STAT_NM,\n          address: item.ADRES,\n          company: item.BUSI_NM,\n          lat,\n          lng,\n          chargers: [] // ğŸ”¥ ì¶©ì „ê¸° ëª©ë¡ ë³‘í•©\n        };\n      }\n\n      // ì¶©ì „ê¸° ì¶”ê°€\n      merged[key].chargers.push({\n        chargerId: item.CHGER_ID,\n        chargerType: item.CHGER_TY,\n        useTime: item.USE_TM,\n        tel: item.TELNO\n      });\n    }\n    merged[key].chargers.push({\n      chargerId: item.CHGER_ID,\n      chargerType: item.CHGER_TY,\n      useTime: item.USE_TM,\n      tel: item.TELNO,\n      // ğŸ”¥ ì„ì‹œ ìƒíƒœ í•„ë“œ ì¶”ê°€ ----------------------------\n      status: \"available\",\n      available: true\n    });\n    const stationList = Object.values(merged);\n    console.log(\"âœ… ë³‘í•©ëœ ì¶©ì „ì†Œ ê°œìˆ˜:\", stationList.length);\n    console.log(\"ğŸ§ª ì˜ˆì‹œ ìŠ¤í…Œì´ì…˜:\", stationList[0]);\n    return stationList;\n  } catch (err) {\n    console.error(\"SafeMap API Error:\", err);\n    throw new Error(\"ì‹¤ì œ API í˜¸ì¶œ ì‹¤íŒ¨\");\n  }\n}\nexport const EvDataService = {\n  async getStations() {\n    return await fetchRealStations();\n  },\n  filterStations(stations, filters) {\n    return stations; // í•„í„°ëŠ” ì•„ì§ ì—†ìŒ\n  }\n};","map":{"version":3,"names":["R","webMercatorToLatLng","x","y","lon","Math","PI","lat","atan","exp","lng","fetchRealStations","_json$response","_json$response$body","_json$response$body$i","response","fetch","json","items","body","item","console","warn","merged","Number","X","Y","isNaN","key","STAT_ID","id","name","STAT_NM","address","ADRES","company","BUSI_NM","chargers","push","chargerId","CHGER_ID","chargerType","CHGER_TY","useTime","USE_TM","tel","TELNO","status","available","stationList","Object","values","log","length","err","error","Error","EvDataService","getStations","filterStations","stations","filters"],"sources":["/Users/jihongkim/Desktop/OSS_Final/src/components/ev/EvDataService.js"],"sourcesContent":["// src/components/ev/EvDataService.js\n\nconst R = 6378137; // Web Mercator ë°˜ì§€ë¦„ (WGS84)\n\n// Safemap Web Mercator â†’ ìœ„ë„/ê²½ë„ ë³€í™˜\nfunction webMercatorToLatLng(x, y) {\n  const lon = (x / R) * (180 / Math.PI);\n  const lat =\n    (2 * Math.atan(Math.exp(y / R)) - Math.PI / 2) * (180 / Math.PI);\n\n  return { lat, lng: lon };\n}\n\n// Safemap API í”„ë¡ì‹œ í˜¸ì¶œ\nexport async function fetchRealStations() {\n  try {\n    const response = await fetch(\"http://localhost:4000/api/charging\");\n    const json = await response.json();\n\n    const items = json?.response?.body?.items?.item;\n    if (!items) {\n      console.warn(\"âš ï¸ Safemap items ì—†ìŒ:\", json);\n      return [];\n    }\n\n    // ------------------------------------------------------------\n    // ğŸ”¥ STAT_ID ê¸°ì¤€ìœ¼ë¡œ ì¶©ì „ì†Œ ë³‘í•© êµ¬ì¡° ìƒì„±\n    // ------------------------------------------------------------\n    const merged = {};\n\n    for (const item of items) {\n      const x = Number(item.X);\n      const y = Number(item.Y);\n\n      // ì¢Œí‘œ ìœ íš¨ì„± ê²€ì‚¬\n      if (!x || !y || Number.isNaN(x) || Number.isNaN(y)) continue;\n\n      // ì¢Œí‘œ ë³€í™˜\n      const { lat, lng } = webMercatorToLatLng(x, y);\n\n      // í•œêµ­ ë²”ìœ„ ë²—ì–´ë‚˜ë©´ ìŠ¤í‚µ\n      if (lat < 30 || lat > 45 || lng < 120 || lng > 135) continue;\n\n      const key = item.STAT_ID;\n\n      // ì¶©ì „ì†Œ ìµœì´ˆ ìƒì„±\n      if (!merged[key]) {\n        merged[key] = {\n          id: key,\n          name: item.STAT_NM,\n          address: item.ADRES,\n          company: item.BUSI_NM,\n          lat,\n          lng,\n          chargers: [], // ğŸ”¥ ì¶©ì „ê¸° ëª©ë¡ ë³‘í•©\n        };\n      }\n\n      // ì¶©ì „ê¸° ì¶”ê°€\n      merged[key].chargers.push({\n        chargerId: item.CHGER_ID,\n        chargerType: item.CHGER_TY,\n        useTime: item.USE_TM,\n        tel: item.TELNO,\n      });\n    }\n\n    merged[key].chargers.push({\n      chargerId: item.CHGER_ID,\n      chargerType: item.CHGER_TY,\n      useTime: item.USE_TM,\n      tel: item.TELNO,\n\n      // ğŸ”¥ ì„ì‹œ ìƒíƒœ í•„ë“œ ì¶”ê°€ ----------------------------\n      status: \"available\",\n      available: true\n    });\n\n    const stationList = Object.values(merged);\n\n    console.log(\"âœ… ë³‘í•©ëœ ì¶©ì „ì†Œ ê°œìˆ˜:\", stationList.length);\n    console.log(\"ğŸ§ª ì˜ˆì‹œ ìŠ¤í…Œì´ì…˜:\", stationList[0]);\n\n    return stationList;\n  } catch (err) {\n    console.error(\"SafeMap API Error:\", err);\n    throw new Error(\"ì‹¤ì œ API í˜¸ì¶œ ì‹¤íŒ¨\");\n  }\n}\n\nexport const EvDataService = {\n  async getStations() {\n    return await fetchRealStations();\n  },\n\n  filterStations(stations, filters) {\n    return stations; // í•„í„°ëŠ” ì•„ì§ ì—†ìŒ\n  },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}