{"ast":null,"code":"// src/components/ev/EvDataService.js\nimport proj4 from \"proj4\";\n\n// ‚≠ê Safemap Ï¢åÌëúÍ≥Ñ = KATEC (EPSG:5178)\nconst KATEC_5178 = \"+proj=tmerc +lat_0=38 +lon_0=127 +k=0.9999 +x_0=200000 +y_0=500000 +ellps=GRS80 +units=m +no_defs\";\nconst WGS84 = \"+proj=longlat +datum=WGS84 +no_defs\";\n\n// ------------------------------\n// üî• Ïã§Ï†ú Ï∂©Ï†ÑÏÜå Îç∞Ïù¥ÌÑ∞ Ìò∏Ï∂ú\n// ------------------------------\nexport async function fetchRealStations() {\n  try {\n    var _json$response, _json$response$body, _json$response$body$i;\n    const response = await fetch(\"http://localhost:4000/api/charging\");\n    const json = await response.json();\n    const items = json === null || json === void 0 ? void 0 : (_json$response = json.response) === null || _json$response === void 0 ? void 0 : (_json$response$body = _json$response.body) === null || _json$response$body === void 0 ? void 0 : (_json$response$body$i = _json$response$body.items) === null || _json$response$body$i === void 0 ? void 0 : _json$response$body$i.item;\n    if (!items) {\n      console.error(\"‚ö†Ô∏è Safemap: items ÏóÜÏùå\");\n      return [];\n    }\n    return items.map(item => {\n      const x = Number(item.X);\n      const y = Number(item.Y);\n      console.log(\"üìå ÏõêÎ≥∏:\", x, y);\n\n      // ‚≠ê KATEC ‚Üí WGS84 Î≥ÄÌôò\n      const [lng, lat] = proj4(KATEC_5178, WGS84, [x, y]);\n      console.log(\"üéØ Î≥ÄÌôòÎêú Ï¢åÌëú:\", lat, lng);\n      return {\n        id: item.OBJT_ID,\n        name: item.STAT_NM,\n        address: item.ADRES,\n        company: item.BUSI_NM,\n        chargerType: item.CHGER_TY,\n        status: \"available\",\n        lat,\n        lng\n      };\n    });\n  } catch (err) {\n    console.error(\"SafeMap API Error:\", err);\n    throw new Error(\"Ïã§Ï†ú API Ìò∏Ï∂ú Ïã§Ìå®\");\n  }\n}\n\n// ------------------------------\n// ÏÑúÎπÑÏä§ export\n// ------------------------------\nexport const EvDataService = {\n  async getStations() {\n    return await fetchRealStations();\n  },\n  filterStations(stations, filters) {\n    return stations; // ÌïÑÌÑ∞ ÏóÜÏùå\n  }\n};","map":{"version":3,"names":["proj4","KATEC_5178","WGS84","fetchRealStations","_json$response","_json$response$body","_json$response$body$i","response","fetch","json","items","body","item","console","error","map","x","Number","X","y","Y","log","lng","lat","id","OBJT_ID","name","STAT_NM","address","ADRES","company","BUSI_NM","chargerType","CHGER_TY","status","err","Error","EvDataService","getStations","filterStations","stations","filters"],"sources":["/Users/jihongkim/Desktop/OSS_Final/src/components/ev/EvDataService.js"],"sourcesContent":["// src/components/ev/EvDataService.js\nimport proj4 from \"proj4\";\n\n// ‚≠ê Safemap Ï¢åÌëúÍ≥Ñ = KATEC (EPSG:5178)\nconst KATEC_5178 =\n  \"+proj=tmerc +lat_0=38 +lon_0=127 +k=0.9999 +x_0=200000 +y_0=500000 +ellps=GRS80 +units=m +no_defs\";\n\nconst WGS84 = \"+proj=longlat +datum=WGS84 +no_defs\";\n\n// ------------------------------\n// üî• Ïã§Ï†ú Ï∂©Ï†ÑÏÜå Îç∞Ïù¥ÌÑ∞ Ìò∏Ï∂ú\n// ------------------------------\nexport async function fetchRealStations() {\n  try {\n    const response = await fetch(\"http://localhost:4000/api/charging\");\n    const json = await response.json();\n\n    const items = json?.response?.body?.items?.item;\n    if (!items) {\n      console.error(\"‚ö†Ô∏è Safemap: items ÏóÜÏùå\");\n      return [];\n    }\n\n    return items.map((item) => {\n      const x = Number(item.X);\n      const y = Number(item.Y);\n\n      console.log(\"üìå ÏõêÎ≥∏:\", x, y);\n\n      // ‚≠ê KATEC ‚Üí WGS84 Î≥ÄÌôò\n      const [lng, lat] = proj4(KATEC_5178, WGS84, [x, y]);\n\n      console.log(\"üéØ Î≥ÄÌôòÎêú Ï¢åÌëú:\", lat, lng);\n\n      return {\n        id: item.OBJT_ID,\n        name: item.STAT_NM,\n        address: item.ADRES,\n        company: item.BUSI_NM,\n        chargerType: item.CHGER_TY,\n        status: \"available\",\n\n        lat,\n        lng,\n      };\n    });\n  } catch (err) {\n    console.error(\"SafeMap API Error:\", err);\n    throw new Error(\"Ïã§Ï†ú API Ìò∏Ï∂ú Ïã§Ìå®\");\n  }\n}\n\n// ------------------------------\n// ÏÑúÎπÑÏä§ export\n// ------------------------------\nexport const EvDataService = {\n  async getStations() {\n    return await fetchRealStations();\n  },\n\n  filterStations(stations, filters) {\n    return stations; // ÌïÑÌÑ∞ ÏóÜÏùå\n  }\n};\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,UAAU,GACd,mGAAmG;AAErG,MAAMC,KAAK,GAAG,qCAAqC;;AAEnD;AACA;AACA;AACA,OAAO,eAAeC,iBAAiBA,CAAA,EAAG;EACxC,IAAI;IAAA,IAAAC,cAAA,EAAAC,mBAAA,EAAAC,qBAAA;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,oCAAoC,CAAC;IAClE,MAAMC,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAI,CAAC,CAAC;IAElC,MAAMC,KAAK,GAAGD,IAAI,aAAJA,IAAI,wBAAAL,cAAA,GAAJK,IAAI,CAAEF,QAAQ,cAAAH,cAAA,wBAAAC,mBAAA,GAAdD,cAAA,CAAgBO,IAAI,cAAAN,mBAAA,wBAAAC,qBAAA,GAApBD,mBAAA,CAAsBK,KAAK,cAAAJ,qBAAA,uBAA3BA,qBAAA,CAA6BM,IAAI;IAC/C,IAAI,CAACF,KAAK,EAAE;MACVG,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAC;MACrC,OAAO,EAAE;IACX;IAEA,OAAOJ,KAAK,CAACK,GAAG,CAAEH,IAAI,IAAK;MACzB,MAAMI,CAAC,GAAGC,MAAM,CAACL,IAAI,CAACM,CAAC,CAAC;MACxB,MAAMC,CAAC,GAAGF,MAAM,CAACL,IAAI,CAACQ,CAAC,CAAC;MAExBP,OAAO,CAACQ,GAAG,CAAC,QAAQ,EAAEL,CAAC,EAAEG,CAAC,CAAC;;MAE3B;MACA,MAAM,CAACG,GAAG,EAAEC,GAAG,CAAC,GAAGvB,KAAK,CAACC,UAAU,EAAEC,KAAK,EAAE,CAACc,CAAC,EAAEG,CAAC,CAAC,CAAC;MAEnDN,OAAO,CAACQ,GAAG,CAAC,YAAY,EAAEE,GAAG,EAAED,GAAG,CAAC;MAEnC,OAAO;QACLE,EAAE,EAAEZ,IAAI,CAACa,OAAO;QAChBC,IAAI,EAAEd,IAAI,CAACe,OAAO;QAClBC,OAAO,EAAEhB,IAAI,CAACiB,KAAK;QACnBC,OAAO,EAAElB,IAAI,CAACmB,OAAO;QACrBC,WAAW,EAAEpB,IAAI,CAACqB,QAAQ;QAC1BC,MAAM,EAAE,WAAW;QAEnBX,GAAG;QACHD;MACF,CAAC;IACH,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOa,GAAG,EAAE;IACZtB,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEqB,GAAG,CAAC;IACxC,MAAM,IAAIC,KAAK,CAAC,cAAc,CAAC;EACjC;AACF;;AAEA;AACA;AACA;AACA,OAAO,MAAMC,aAAa,GAAG;EAC3B,MAAMC,WAAWA,CAAA,EAAG;IAClB,OAAO,MAAMnC,iBAAiB,CAAC,CAAC;EAClC,CAAC;EAEDoC,cAAcA,CAACC,QAAQ,EAAEC,OAAO,EAAE;IAChC,OAAOD,QAAQ,CAAC,CAAC;EACnB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}