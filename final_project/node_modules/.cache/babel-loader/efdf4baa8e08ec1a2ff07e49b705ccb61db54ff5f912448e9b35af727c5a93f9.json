{"ast":null,"code":"// ======================\n// üöÄ SafeMap EV Data Service\n// ======================\n\n// Ïã§Ï†ú API Ìò∏Ï∂ú (Proxy ÏÑúÎ≤Ñ)\nexport async function fetchRealStations() {\n  try {\n    const response = await fetch(\"http://localhost:4000/api/charging\");\n    const raw = await response.json();\n    console.log(\"ÏõêÎ≥∏ SafeMap Îç∞Ïù¥ÌÑ∞:\", raw);\n    const stations = transformSafeMapData(raw);\n    console.log(\"Î≥ÄÌôòÎêú Ïä§ÌÖåÏù¥ÏÖò:\", stations);\n    return stations;\n  } catch (err) {\n    console.error(\"SafeMap API Error:\", err);\n    throw new Error(\"Ïã§Ï†ú API Ìò∏Ï∂ú Ïã§Ìå®\");\n  }\n}\n\n// ======================\n// üî• XML ‚Üí JSON Î≥ÄÌôò ÌõÑ Station Íµ¨Ï°∞ ÎßåÎì§Í∏∞\n// ======================\n\nfunction transformSafeMapData(raw) {\n  var _raw$response, _raw$response$body, _raw$response$body$it;\n  const items = (raw === null || raw === void 0 ? void 0 : (_raw$response = raw.response) === null || _raw$response === void 0 ? void 0 : (_raw$response$body = _raw$response.body) === null || _raw$response$body === void 0 ? void 0 : (_raw$response$body$it = _raw$response$body.items) === null || _raw$response$body$it === void 0 ? void 0 : _raw$response$body$it.item) || [];\n  if (!Array.isArray(items)) {\n    console.warn(\"Item Îç∞Ïù¥ÌÑ∞Í∞Ä Î∞∞Ïó¥Ïù¥ ÏïÑÎãò:\", items);\n    return [];\n  }\n  const stations = {};\n  items.forEach(item => {\n    const stationId = item.STAT_ID;\n    if (!stations[stationId]) {\n      // Ï∂©Ï†ÑÏÜå Í∏∞Î≥∏ Ï†ïÎ≥¥ ÏÉùÏÑ±\n      stations[stationId] = {\n        id: stationId,\n        name: item.STAT_NM,\n        address: item.ADRES,\n        lat: convertCoord(item.Y),\n        lng: convertCoord(item.X),\n        chargers: []\n      };\n    }\n\n    // Ï∂©Ï†ÑÍ∏∞ Ï†ïÎ≥¥ ÎàÑÏ†Å\n    stations[stationId].chargers.push({\n      chargerId: item.CHGER_ID,\n      type: item.CHGER_TY,\n      useTime: item.USE_TM,\n      company: item.BUSI_NM\n    });\n  });\n  return Object.values(stations);\n}\n\n// ======================\n// üìå Ï¢åÌëú Î≥ÄÌôò (ÏûÑÏãú: Ïã§Ï†ú Î≥ÄÌôò ÌïÑÏöîÌïòÎ©¥ ÏïåÎ†§Ï§ò)\n// ======================\nfunction convertCoord(value) {\n  return Number(value) / 100000; // ÏûÑÏãú Î≥ÄÌôò\n}\n\n// ======================\n// üîç Ïô∏Î∂ÄÏóêÏÑú ÏÇ¨Ïö©Îê† API\n// ======================\nexport const EvDataService = {\n  getStations: fetchRealStations\n};","map":{"version":3,"names":["fetchRealStations","response","fetch","raw","json","console","log","stations","transformSafeMapData","err","error","Error","_raw$response","_raw$response$body","_raw$response$body$it","items","body","item","Array","isArray","warn","forEach","stationId","STAT_ID","id","name","STAT_NM","address","ADRES","lat","convertCoord","Y","lng","X","chargers","push","chargerId","CHGER_ID","type","CHGER_TY","useTime","USE_TM","company","BUSI_NM","Object","values","value","Number","EvDataService","getStations"],"sources":["/Users/jihongkim/Desktop/OSS_Final/src/components/ev/EvDataService.js"],"sourcesContent":["// ======================\n// üöÄ SafeMap EV Data Service\n// ======================\n\n// Ïã§Ï†ú API Ìò∏Ï∂ú (Proxy ÏÑúÎ≤Ñ)\nexport async function fetchRealStations() {\n  try {\n    const response = await fetch(\"http://localhost:4000/api/charging\");\n    const raw = await response.json();\n\n    console.log(\"ÏõêÎ≥∏ SafeMap Îç∞Ïù¥ÌÑ∞:\", raw);\n\n    const stations = transformSafeMapData(raw);\n\n    console.log(\"Î≥ÄÌôòÎêú Ïä§ÌÖåÏù¥ÏÖò:\", stations);\n\n    return stations;\n  } catch (err) {\n    console.error(\"SafeMap API Error:\", err);\n    throw new Error(\"Ïã§Ï†ú API Ìò∏Ï∂ú Ïã§Ìå®\");\n  }\n}\n\n// ======================\n// üî• XML ‚Üí JSON Î≥ÄÌôò ÌõÑ Station Íµ¨Ï°∞ ÎßåÎì§Í∏∞\n// ======================\n\nfunction transformSafeMapData(raw) {\n  const items = raw?.response?.body?.items?.item || [];\n\n  if (!Array.isArray(items)) {\n    console.warn(\"Item Îç∞Ïù¥ÌÑ∞Í∞Ä Î∞∞Ïó¥Ïù¥ ÏïÑÎãò:\", items);\n    return [];\n  }\n\n  const stations = {};\n\n  items.forEach(item => {\n    const stationId = item.STAT_ID;\n\n    if (!stations[stationId]) {\n      // Ï∂©Ï†ÑÏÜå Í∏∞Î≥∏ Ï†ïÎ≥¥ ÏÉùÏÑ±\n      stations[stationId] = {\n        id: stationId,\n        name: item.STAT_NM,\n        address: item.ADRES,\n        lat: convertCoord(item.Y),\n        lng: convertCoord(item.X),\n        chargers: []\n      };\n    }\n\n    // Ï∂©Ï†ÑÍ∏∞ Ï†ïÎ≥¥ ÎàÑÏ†Å\n    stations[stationId].chargers.push({\n      chargerId: item.CHGER_ID,\n      type: item.CHGER_TY,\n      useTime: item.USE_TM,\n      company: item.BUSI_NM\n    });\n  });\n\n  return Object.values(stations);\n}\n\n// ======================\n// üìå Ï¢åÌëú Î≥ÄÌôò (ÏûÑÏãú: Ïã§Ï†ú Î≥ÄÌôò ÌïÑÏöîÌïòÎ©¥ ÏïåÎ†§Ï§ò)\n// ======================\nfunction convertCoord(value) {\n  return Number(value) / 100000; // ÏûÑÏãú Î≥ÄÌôò\n}\n\n// ======================\n// üîç Ïô∏Î∂ÄÏóêÏÑú ÏÇ¨Ïö©Îê† API\n// ======================\nexport const EvDataService = {\n  getStations: fetchRealStations\n};\n"],"mappings":"AAAA;AACA;AACA;;AAEA;AACA,OAAO,eAAeA,iBAAiBA,CAAA,EAAG;EACxC,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,oCAAoC,CAAC;IAClE,MAAMC,GAAG,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAEjCC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEH,GAAG,CAAC;IAEnC,MAAMI,QAAQ,GAAGC,oBAAoB,CAACL,GAAG,CAAC;IAE1CE,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEC,QAAQ,CAAC;IAElC,OAAOA,QAAQ;EACjB,CAAC,CAAC,OAAOE,GAAG,EAAE;IACZJ,OAAO,CAACK,KAAK,CAAC,oBAAoB,EAAED,GAAG,CAAC;IACxC,MAAM,IAAIE,KAAK,CAAC,cAAc,CAAC;EACjC;AACF;;AAEA;AACA;AACA;;AAEA,SAASH,oBAAoBA,CAACL,GAAG,EAAE;EAAA,IAAAS,aAAA,EAAAC,kBAAA,EAAAC,qBAAA;EACjC,MAAMC,KAAK,GAAG,CAAAZ,GAAG,aAAHA,GAAG,wBAAAS,aAAA,GAAHT,GAAG,CAAEF,QAAQ,cAAAW,aAAA,wBAAAC,kBAAA,GAAbD,aAAA,CAAeI,IAAI,cAAAH,kBAAA,wBAAAC,qBAAA,GAAnBD,kBAAA,CAAqBE,KAAK,cAAAD,qBAAA,uBAA1BA,qBAAA,CAA4BG,IAAI,KAAI,EAAE;EAEpD,IAAI,CAACC,KAAK,CAACC,OAAO,CAACJ,KAAK,CAAC,EAAE;IACzBV,OAAO,CAACe,IAAI,CAAC,mBAAmB,EAAEL,KAAK,CAAC;IACxC,OAAO,EAAE;EACX;EAEA,MAAMR,QAAQ,GAAG,CAAC,CAAC;EAEnBQ,KAAK,CAACM,OAAO,CAACJ,IAAI,IAAI;IACpB,MAAMK,SAAS,GAAGL,IAAI,CAACM,OAAO;IAE9B,IAAI,CAAChB,QAAQ,CAACe,SAAS,CAAC,EAAE;MACxB;MACAf,QAAQ,CAACe,SAAS,CAAC,GAAG;QACpBE,EAAE,EAAEF,SAAS;QACbG,IAAI,EAAER,IAAI,CAACS,OAAO;QAClBC,OAAO,EAAEV,IAAI,CAACW,KAAK;QACnBC,GAAG,EAAEC,YAAY,CAACb,IAAI,CAACc,CAAC,CAAC;QACzBC,GAAG,EAAEF,YAAY,CAACb,IAAI,CAACgB,CAAC,CAAC;QACzBC,QAAQ,EAAE;MACZ,CAAC;IACH;;IAEA;IACA3B,QAAQ,CAACe,SAAS,CAAC,CAACY,QAAQ,CAACC,IAAI,CAAC;MAChCC,SAAS,EAAEnB,IAAI,CAACoB,QAAQ;MACxBC,IAAI,EAAErB,IAAI,CAACsB,QAAQ;MACnBC,OAAO,EAAEvB,IAAI,CAACwB,MAAM;MACpBC,OAAO,EAAEzB,IAAI,CAAC0B;IAChB,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF,OAAOC,MAAM,CAACC,MAAM,CAACtC,QAAQ,CAAC;AAChC;;AAEA;AACA;AACA;AACA,SAASuB,YAAYA,CAACgB,KAAK,EAAE;EAC3B,OAAOC,MAAM,CAACD,KAAK,CAAC,GAAG,MAAM,CAAC,CAAC;AACjC;;AAEA;AACA;AACA;AACA,OAAO,MAAME,aAAa,GAAG;EAC3BC,WAAW,EAAEjD;AACf,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}