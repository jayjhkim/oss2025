{"ast":null,"code":"import adjust_lat from '../common/adjust_lat';\nimport adjust_lon from '../common/adjust_lon';\nimport hypot from '../common/hypot';\nimport pj_enfn from '../common/pj_enfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport { HALF_PI } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} phi1\n * @property {number} cphi1\n * @property {number} es\n * @property {Array<number>} en\n * @property {number} m1\n * @property {number} am1\n */\n\nvar EPS10 = 1e-10;\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  var c;\n  this.phi1 = this.lat1;\n  if (Math.abs(this.phi1) < EPS10) {\n    throw new Error();\n  }\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.m1 = pj_mlfn(this.phi1, this.am1 = Math.sin(this.phi1), c = Math.cos(this.phi1), this.en);\n    this.am1 = c / (Math.sqrt(1 - this.es * this.am1 * this.am1) * this.am1);\n    this.inverse = e_inv;\n    this.forward = e_fwd;\n  } else {\n    if (Math.abs(this.phi1) + EPS10 >= HALF_PI) {\n      this.cphi1 = 0;\n    } else {\n      this.cphi1 = 1 / Math.tan(this.phi1);\n    }\n    this.inverse = s_inv;\n    this.forward = s_fwd;\n  }\n}\nfunction e_fwd(p) {\n  var lam = adjust_lon(p.x - (this.long0 || 0), this.over);\n  var phi = p.y;\n  var rh, E, c;\n  rh = this.am1 + this.m1 - pj_mlfn(phi, E = Math.sin(phi), c = Math.cos(phi), this.en);\n  E = c * lam / (rh * Math.sqrt(1 - this.es * E * E));\n  p.x = rh * Math.sin(E);\n  p.y = this.am1 - rh * Math.cos(E);\n  p.x = this.a * p.x + (this.x0 || 0);\n  p.y = this.a * p.y + (this.y0 || 0);\n  return p;\n}\nfunction e_inv(p) {\n  p.x = (p.x - (this.x0 || 0)) / this.a;\n  p.y = (p.y - (this.y0 || 0)) / this.a;\n  var s, rh, lam, phi;\n  rh = hypot(p.x, p.y = this.am1 - p.y);\n  phi = pj_inv_mlfn(this.am1 + this.m1 - rh, this.es, this.en);\n  if ((s = Math.abs(phi)) < HALF_PI) {\n    s = Math.sin(phi);\n    lam = rh * Math.atan2(p.x, p.y) * Math.sqrt(1 - this.es * s * s) / Math.cos(phi);\n  } else if (Math.abs(s - HALF_PI) <= EPS10) {\n    lam = 0;\n  } else {\n    throw new Error();\n  }\n  p.x = adjust_lon(lam + (this.long0 || 0), this.over);\n  p.y = adjust_lat(phi);\n  return p;\n}\nfunction s_fwd(p) {\n  var lam = adjust_lon(p.x - (this.long0 || 0), this.over);\n  var phi = p.y;\n  var E, rh;\n  rh = this.cphi1 + this.phi1 - phi;\n  if (Math.abs(rh) > EPS10) {\n    p.x = rh * Math.sin(E = lam * Math.cos(phi) / rh);\n    p.y = this.cphi1 - rh * Math.cos(E);\n  } else {\n    p.x = p.y = 0;\n  }\n  p.x = this.a * p.x + (this.x0 || 0);\n  p.y = this.a * p.y + (this.y0 || 0);\n  return p;\n}\nfunction s_inv(p) {\n  p.x = (p.x - (this.x0 || 0)) / this.a;\n  p.y = (p.y - (this.y0 || 0)) / this.a;\n  var lam, phi;\n  var rh = hypot(p.x, p.y = this.cphi1 - p.y);\n  phi = this.cphi1 + this.phi1 - rh;\n  if (Math.abs(phi) > HALF_PI) {\n    throw new Error();\n  }\n  if (Math.abs(Math.abs(phi) - HALF_PI) <= EPS10) {\n    lam = 0;\n  } else {\n    lam = rh * Math.atan2(p.x, p.y) / Math.cos(phi);\n  }\n  p.x = adjust_lon(lam + (this.long0 || 0), this.over);\n  p.y = adjust_lat(phi);\n  return p;\n}\nexport var names = ['bonne', 'Bonne (Werner lat_1=90)'];\nexport default {\n  init: init,\n  names: names\n};","map":{"version":3,"names":["adjust_lat","adjust_lon","hypot","pj_enfn","pj_inv_mlfn","pj_mlfn","HALF_PI","EPS10","init","c","phi1","lat1","Math","abs","Error","es","en","m1","am1","sin","cos","sqrt","inverse","e_inv","forward","e_fwd","cphi1","tan","s_inv","s_fwd","p","lam","x","long0","over","phi","y","rh","E","a","x0","y0","s","atan2","names"],"sources":["/Users/jihongkim/Desktop/OSS_Final/node_modules/proj4/lib/projections/bonne.js"],"sourcesContent":["import adjust_lat from '../common/adjust_lat';\nimport adjust_lon from '../common/adjust_lon';\nimport hypot from '../common/hypot';\nimport pj_enfn from '../common/pj_enfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport { HALF_PI } from '../constants/values';\n\n/**\n * @typedef {Object} LocalThis\n * @property {number} phi1\n * @property {number} cphi1\n * @property {number} es\n * @property {Array<number>} en\n * @property {number} m1\n * @property {number} am1\n */\n\nvar EPS10 = 1e-10;\n\n/** @this {import('../defs.js').ProjectionDefinition & LocalThis} */\nexport function init() {\n  var c;\n\n  this.phi1 = this.lat1;\n  if (Math.abs(this.phi1) < EPS10) {\n    throw new Error();\n  }\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.m1 = pj_mlfn(this.phi1, this.am1 = Math.sin(this.phi1),\n      c = Math.cos(this.phi1), this.en);\n    this.am1 = c / (Math.sqrt(1 - this.es * this.am1 * this.am1) * this.am1);\n    this.inverse = e_inv;\n    this.forward = e_fwd;\n  } else {\n    if (Math.abs(this.phi1) + EPS10 >= HALF_PI) {\n      this.cphi1 = 0;\n    } else {\n      this.cphi1 = 1 / Math.tan(this.phi1);\n    }\n    this.inverse = s_inv;\n    this.forward = s_fwd;\n  }\n}\n\nfunction e_fwd(p) {\n  var lam = adjust_lon(p.x - (this.long0 || 0), this.over);\n  var phi = p.y;\n  var rh, E, c;\n  rh = this.am1 + this.m1 - pj_mlfn(phi, E = Math.sin(phi), c = Math.cos(phi), this.en);\n  E = c * lam / (rh * Math.sqrt(1 - this.es * E * E));\n  p.x = rh * Math.sin(E);\n  p.y = this.am1 - rh * Math.cos(E);\n\n  p.x = this.a * p.x + (this.x0 || 0);\n  p.y = this.a * p.y + (this.y0 || 0);\n  return p;\n}\n\nfunction e_inv(p) {\n  p.x = (p.x - (this.x0 || 0)) / this.a;\n  p.y = (p.y - (this.y0 || 0)) / this.a;\n\n  var s, rh, lam, phi;\n  rh = hypot(p.x, p.y = this.am1 - p.y);\n  phi = pj_inv_mlfn(this.am1 + this.m1 - rh, this.es, this.en);\n  if ((s = Math.abs(phi)) < HALF_PI) {\n    s = Math.sin(phi);\n    lam = rh * Math.atan2(p.x, p.y) * Math.sqrt(1 - this.es * s * s) / Math.cos(phi);\n  } else if (Math.abs(s - HALF_PI) <= EPS10) {\n    lam = 0;\n  } else {\n    throw new Error();\n  }\n  p.x = adjust_lon(lam + (this.long0 || 0), this.over);\n  p.y = adjust_lat(phi);\n  return p;\n}\n\nfunction s_fwd(p) {\n  var lam = adjust_lon(p.x - (this.long0 || 0), this.over);\n  var phi = p.y;\n  var E, rh;\n  rh = this.cphi1 + this.phi1 - phi;\n  if (Math.abs(rh) > EPS10) {\n    p.x = rh * Math.sin(E = lam * Math.cos(phi) / rh);\n    p.y = this.cphi1 - rh * Math.cos(E);\n  } else {\n    p.x = p.y = 0;\n  }\n\n  p.x = this.a * p.x + (this.x0 || 0);\n  p.y = this.a * p.y + (this.y0 || 0);\n  return p;\n}\n\nfunction s_inv(p) {\n  p.x = (p.x - (this.x0 || 0)) / this.a;\n  p.y = (p.y - (this.y0 || 0)) / this.a;\n\n  var lam, phi;\n  var rh = hypot(p.x, p.y = this.cphi1 - p.y);\n  phi = this.cphi1 + this.phi1 - rh;\n  if (Math.abs(phi) > HALF_PI) {\n    throw new Error();\n  }\n  if (Math.abs(Math.abs(phi) - HALF_PI) <= EPS10) {\n    lam = 0;\n  } else {\n    lam = rh * Math.atan2(p.x, p.y) / Math.cos(phi);\n  }\n  p.x = adjust_lon(lam + (this.long0 || 0), this.over);\n  p.y = adjust_lat(phi);\n  return p;\n}\n\nexport var names = ['bonne', 'Bonne (Werner lat_1=90)'];\nexport default {\n  init: init,\n  names: names\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}