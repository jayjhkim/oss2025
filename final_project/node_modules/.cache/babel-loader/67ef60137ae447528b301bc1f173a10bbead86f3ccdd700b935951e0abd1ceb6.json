{"ast":null,"code":"import proj4 from \"proj4\";\n\n/* --------------------------------------\n   ì¢Œí‘œê³„ ì •ì˜ (SafeMap â†’ TM ì¢Œí‘œ â†’ WGS84)\n----------------------------------------- */\nconst TM_5179 = \"+proj=tmerc +lat_0=38 +lon_0=127 +k=1 +x_0=200000 +y_0=500000 +ellps=GRS80 +units=m +no_defs\";\nconst WGS84 = \"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs\";\n\n/* ------------------------------------------------------\n   ì‹¤ì œ API í˜¸ì¶œ (proxy ì„œë²„ â†’ XML â†’ JSON ë³€í™˜ëœ ë°ì´í„°)\n-------------------------------------------------------- */\nexport async function fetchRealStations() {\n  try {\n    var _json$response, _json$response$body, _json$response$body$i;\n    const res = await fetch(\"http://localhost:4000/api/charging\");\n    const json = await res.json();\n    const items = json === null || json === void 0 ? void 0 : (_json$response = json.response) === null || _json$response === void 0 ? void 0 : (_json$response$body = _json$response.body) === null || _json$response$body === void 0 ? void 0 : (_json$response$body$i = _json$response$body.items) === null || _json$response$body$i === void 0 ? void 0 : _json$response$body$i.item;\n    if (!items) return [];\n\n    // â­ SafeMap ì€ X, Y â†’ TM ì¢Œí‘œê³„ë¥¼ ì¤Œ â†’ WGS84 ë¡œ ë³€í™˜\n    return items.map(item => {\n      // ì¢Œí‘œ ë³€í™˜\n      const [lng, lat] = proj4(TM_5179, WGS84, [Number(item.X), Number(item.Y)]);\n      return {\n        id: item.OBJT_ID,\n        name: item.STAT_NM,\n        address: item.ADRES,\n        latitude: lat,\n        longitude: lng,\n        chargerType: item.CHGER_TY,\n        company: item.BUSI_NM,\n        status: \"available\"\n      };\n    });\n  } catch (err) {\n    console.error(\"ðŸ”¥ SafeMap API Error:\", err);\n    return [];\n  }\n}\n\n/* --------------------------------------\n   EvDataService ê°ì²´ (MapPage ì—ì„œ ì‚¬ìš©)\n----------------------------------------- */\nexport const EvDataService = {\n  // 1) ëª¨ë“  ì¶©ì „ì†Œ ê°€ì ¸ì˜¤ê¸°\n  async getStations() {\n    return await fetchRealStations();\n  },\n  // 2) í•„í„°ë§ ê¸°ëŠ¥\n  filterStations(stations, filters) {\n    if (!Array.isArray(stations)) return [];\n    return stations.filter(s => {\n      const matchStatus = filters.statuses.length === 0 || filters.statuses.includes(s.status);\n      const matchChargerType = filters.chargerTypes.length === 0 || filters.chargerTypes.includes(String(s.chargerType));\n      const matchCompany = filters.companies.length === 0 || filters.companies.includes(s.company);\n      return matchStatus && matchChargerType && matchCompany;\n    });\n  }\n};","map":{"version":3,"names":["proj4","TM_5179","WGS84","fetchRealStations","_json$response","_json$response$body","_json$response$body$i","res","fetch","json","items","response","body","item","map","lng","lat","Number","X","Y","id","OBJT_ID","name","STAT_NM","address","ADRES","latitude","longitude","chargerType","CHGER_TY","company","BUSI_NM","status","err","console","error","EvDataService","getStations","filterStations","stations","filters","Array","isArray","filter","s","matchStatus","statuses","length","includes","matchChargerType","chargerTypes","String","matchCompany","companies"],"sources":["/Users/jihongkim/Desktop/OSS_Final/src/components/ev/EvDataService.js"],"sourcesContent":["import proj4 from \"proj4\";\n\n/* --------------------------------------\n   ì¢Œí‘œê³„ ì •ì˜ (SafeMap â†’ TM ì¢Œí‘œ â†’ WGS84)\n----------------------------------------- */\nconst TM_5179 =\n  \"+proj=tmerc +lat_0=38 +lon_0=127 +k=1 +x_0=200000 +y_0=500000 +ellps=GRS80 +units=m +no_defs\";\n\nconst WGS84 =\n  \"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs\";\n\n/* ------------------------------------------------------\n   ì‹¤ì œ API í˜¸ì¶œ (proxy ì„œë²„ â†’ XML â†’ JSON ë³€í™˜ëœ ë°ì´í„°)\n-------------------------------------------------------- */\nexport async function fetchRealStations() {\n  try {\n    const res = await fetch(\"http://localhost:4000/api/charging\");\n    const json = await res.json();\n\n    const items = json?.response?.body?.items?.item;\n    if (!items) return [];\n\n    // â­ SafeMap ì€ X, Y â†’ TM ì¢Œí‘œê³„ë¥¼ ì¤Œ â†’ WGS84 ë¡œ ë³€í™˜\n    return items.map((item) => {\n      // ì¢Œí‘œ ë³€í™˜\n      const [lng, lat] = proj4(TM_5179, WGS84, [\n        Number(item.X),\n        Number(item.Y),\n      ]);\n\n      return {\n        id: item.OBJT_ID,\n        name: item.STAT_NM,\n        address: item.ADRES,\n        latitude: lat,\n        longitude: lng,\n        chargerType: item.CHGER_TY,\n        company: item.BUSI_NM,\n        status: \"available\",\n      };\n    });\n  } catch (err) {\n    console.error(\"ðŸ”¥ SafeMap API Error:\", err);\n    return [];\n  }\n}\n\n/* --------------------------------------\n   EvDataService ê°ì²´ (MapPage ì—ì„œ ì‚¬ìš©)\n----------------------------------------- */\nexport const EvDataService = {\n  // 1) ëª¨ë“  ì¶©ì „ì†Œ ê°€ì ¸ì˜¤ê¸°\n  async getStations() {\n    return await fetchRealStations();\n  },\n\n  // 2) í•„í„°ë§ ê¸°ëŠ¥\n  filterStations(stations, filters) {\n    if (!Array.isArray(stations)) return [];\n\n    return stations.filter((s) => {\n      const matchStatus =\n        filters.statuses.length === 0 ||\n        filters.statuses.includes(s.status);\n\n      const matchChargerType =\n        filters.chargerTypes.length === 0 ||\n        filters.chargerTypes.includes(String(s.chargerType));\n\n      const matchCompany =\n        filters.companies.length === 0 ||\n        filters.companies.includes(s.company);\n\n      return matchStatus && matchChargerType && matchCompany;\n    });\n  },\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA;AACA;AACA,MAAMC,OAAO,GACX,8FAA8F;AAEhG,MAAMC,KAAK,GACT,kDAAkD;;AAEpD;AACA;AACA;AACA,OAAO,eAAeC,iBAAiBA,CAAA,EAAG;EACxC,IAAI;IAAA,IAAAC,cAAA,EAAAC,mBAAA,EAAAC,qBAAA;IACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,oCAAoC,CAAC;IAC7D,MAAMC,IAAI,GAAG,MAAMF,GAAG,CAACE,IAAI,CAAC,CAAC;IAE7B,MAAMC,KAAK,GAAGD,IAAI,aAAJA,IAAI,wBAAAL,cAAA,GAAJK,IAAI,CAAEE,QAAQ,cAAAP,cAAA,wBAAAC,mBAAA,GAAdD,cAAA,CAAgBQ,IAAI,cAAAP,mBAAA,wBAAAC,qBAAA,GAApBD,mBAAA,CAAsBK,KAAK,cAAAJ,qBAAA,uBAA3BA,qBAAA,CAA6BO,IAAI;IAC/C,IAAI,CAACH,KAAK,EAAE,OAAO,EAAE;;IAErB;IACA,OAAOA,KAAK,CAACI,GAAG,CAAED,IAAI,IAAK;MACzB;MACA,MAAM,CAACE,GAAG,EAAEC,GAAG,CAAC,GAAGhB,KAAK,CAACC,OAAO,EAAEC,KAAK,EAAE,CACvCe,MAAM,CAACJ,IAAI,CAACK,CAAC,CAAC,EACdD,MAAM,CAACJ,IAAI,CAACM,CAAC,CAAC,CACf,CAAC;MAEF,OAAO;QACLC,EAAE,EAAEP,IAAI,CAACQ,OAAO;QAChBC,IAAI,EAAET,IAAI,CAACU,OAAO;QAClBC,OAAO,EAAEX,IAAI,CAACY,KAAK;QACnBC,QAAQ,EAAEV,GAAG;QACbW,SAAS,EAAEZ,GAAG;QACda,WAAW,EAAEf,IAAI,CAACgB,QAAQ;QAC1BC,OAAO,EAAEjB,IAAI,CAACkB,OAAO;QACrBC,MAAM,EAAE;MACV,CAAC;IACH,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;IAC3C,OAAO,EAAE;EACX;AACF;;AAEA;AACA;AACA;AACA,OAAO,MAAMG,aAAa,GAAG;EAC3B;EACA,MAAMC,WAAWA,CAAA,EAAG;IAClB,OAAO,MAAMlC,iBAAiB,CAAC,CAAC;EAClC,CAAC;EAED;EACAmC,cAAcA,CAACC,QAAQ,EAAEC,OAAO,EAAE;IAChC,IAAI,CAACC,KAAK,CAACC,OAAO,CAACH,QAAQ,CAAC,EAAE,OAAO,EAAE;IAEvC,OAAOA,QAAQ,CAACI,MAAM,CAAEC,CAAC,IAAK;MAC5B,MAAMC,WAAW,GACfL,OAAO,CAACM,QAAQ,CAACC,MAAM,KAAK,CAAC,IAC7BP,OAAO,CAACM,QAAQ,CAACE,QAAQ,CAACJ,CAAC,CAACZ,MAAM,CAAC;MAErC,MAAMiB,gBAAgB,GACpBT,OAAO,CAACU,YAAY,CAACH,MAAM,KAAK,CAAC,IACjCP,OAAO,CAACU,YAAY,CAACF,QAAQ,CAACG,MAAM,CAACP,CAAC,CAAChB,WAAW,CAAC,CAAC;MAEtD,MAAMwB,YAAY,GAChBZ,OAAO,CAACa,SAAS,CAACN,MAAM,KAAK,CAAC,IAC9BP,OAAO,CAACa,SAAS,CAACL,QAAQ,CAACJ,CAAC,CAACd,OAAO,CAAC;MAEvC,OAAOe,WAAW,IAAII,gBAAgB,IAAIG,YAAY;IACxD,CAAC,CAAC;EACJ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}