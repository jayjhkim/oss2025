{"ast":null,"code":"// src/components/ev/EVDataService.js\n\n// ------------------------------\n// CONFIG\n// ------------------------------\nconst API_KEY = \"P0QJKBPH-P0QJ-P0QJ-P0QJ-P0QJKBPHWJ\";\nconst REAL_API_URL = `https://safemap.go.kr/openApiService/data/getChargingStationData1.do?serviceKey=${API_KEY}&pageNo=1&numOfRows=2000&type=json`;\n\n// ------------------------------\n// REAL SAFE-MAP API FETCH\n// ------------------------------\n// CORS 때문에 브라우저에서는 SafeMap 호출이 불가능 → 프록시 서버 필수\n// React에서는 \"/api/charging\"만 호출하면 됨\nasync function fetchRealStations() {\n  try {\n    const res = await fetch(\"/api/charging\");\n    const data = await res.json();\n    const list = (data === null || data === void 0 ? void 0 : data.list) || [];\n    return list.map((item, idx) => ({\n      id: `station-${idx}`,\n      name: item.faclNm,\n      address: item.addr,\n      lat: Number(item.lat),\n      lng: Number(item.lon),\n      company: item.oprtr || \"정보 없음\",\n      chargerType: \"정보 없음\",\n      status: \"available\",\n      // SafeMap은 상태 제공 안 하므로 기본값\n      chargers: [],\n      operatingHours: item.oprtTime || \"정보 없음\",\n      phone: item.phone || \"정보 없음\",\n      pricing: \"정보 없음\"\n    }));\n  } catch (err) {\n    console.error(\"SafeMap API Error:\", err);\n    throw new Error(\"실제 API 호출 실패\");\n  }\n}\n\n// ------------------------------\n// SERVICE EXPORT\n// ------------------------------\nlet cachedStations = null;\nexport const EVDataService = {\n  async getStations() {\n    if (cachedStations) return cachedStations;\n    const realData = await fetchRealStations();\n    cachedStations = realData;\n    return realData;\n  },\n  async getStationById(id) {\n    const stations = await this.getStations();\n    return stations.find(s => s.id === id);\n  },\n  filterStations(stations, filters) {\n    return stations.filter(station => {\n      var _filters$statuses, _filters$chargerTypes, _filters$companies;\n      // status\n      if ((_filters$statuses = filters.statuses) !== null && _filters$statuses !== void 0 && _filters$statuses.length && !filters.statuses.includes(station.status)) {\n        return false;\n      }\n\n      // charger type\n      if ((_filters$chargerTypes = filters.chargerTypes) !== null && _filters$chargerTypes !== void 0 && _filters$chargerTypes.length) {\n        const hasType = station.chargers.some(c => filters.chargerTypes.includes(c.type));\n        if (!hasType) return false;\n      }\n\n      // company\n      if ((_filters$companies = filters.companies) !== null && _filters$companies !== void 0 && _filters$companies.length && !filters.companies.includes(station.company)) {\n        return false;\n      }\n      return true;\n    });\n  }\n};","map":{"version":3,"names":["API_KEY","REAL_API_URL","fetchRealStations","res","fetch","data","json","list","map","item","idx","id","name","faclNm","address","addr","lat","Number","lng","lon","company","oprtr","chargerType","status","chargers","operatingHours","oprtTime","phone","pricing","err","console","error","Error","cachedStations","EVDataService","getStations","realData","getStationById","stations","find","s","filterStations","filters","filter","station","_filters$statuses","_filters$chargerTypes","_filters$companies","statuses","length","includes","chargerTypes","hasType","some","c","type","companies"],"sources":["/Users/jihongkim/Desktop/OSS_Final/src/components/ev/EvDataService.js"],"sourcesContent":["// src/components/ev/EVDataService.js\n\n// ------------------------------\n// CONFIG\n// ------------------------------\nconst API_KEY = \"P0QJKBPH-P0QJ-P0QJ-P0QJ-P0QJKBPHWJ\";\nconst REAL_API_URL = `https://safemap.go.kr/openApiService/data/getChargingStationData1.do?serviceKey=${API_KEY}&pageNo=1&numOfRows=2000&type=json`;\n\n\n// ------------------------------\n// REAL SAFE-MAP API FETCH\n// ------------------------------\n// CORS 때문에 브라우저에서는 SafeMap 호출이 불가능 → 프록시 서버 필수\n// React에서는 \"/api/charging\"만 호출하면 됨\nasync function fetchRealStations() {\n  try {\n    const res = await fetch(\"/api/charging\");\n    const data = await res.json();\n\n    const list = data?.list || [];\n\n    return list.map((item, idx) => ({\n      id: `station-${idx}`,\n      name: item.faclNm,\n      address: item.addr,\n      lat: Number(item.lat),\n      lng: Number(item.lon),\n      company: item.oprtr || \"정보 없음\",\n      chargerType: \"정보 없음\",\n      status: \"available\",   // SafeMap은 상태 제공 안 하므로 기본값\n      chargers: [],\n      operatingHours: item.oprtTime || \"정보 없음\",\n      phone: item.phone || \"정보 없음\",\n      pricing: \"정보 없음\"\n    }));\n\n  } catch (err) {\n    console.error(\"SafeMap API Error:\", err);\n    throw new Error(\"실제 API 호출 실패\");\n  }\n}\n\n\n// ------------------------------\n// SERVICE EXPORT\n// ------------------------------\nlet cachedStations = null;\n\nexport const EVDataService = {\n  async getStations() {\n    if (cachedStations) return cachedStations;\n\n    const realData = await fetchRealStations();\n\n    cachedStations = realData;\n    return realData;\n  },\n\n  async getStationById(id) {\n    const stations = await this.getStations();\n    return stations.find(s => s.id === id);\n  },\n\n  filterStations(stations, filters) {\n    return stations.filter(station => {\n\n      // status\n      if (filters.statuses?.length && !filters.statuses.includes(station.status)) {\n        return false;\n      }\n\n      // charger type\n      if (filters.chargerTypes?.length) {\n        const hasType = station.chargers.some(c =>\n          filters.chargerTypes.includes(c.type)\n        );\n        if (!hasType) return false;\n      }\n\n      // company\n      if (filters.companies?.length && !filters.companies.includes(station.company)) {\n        return false;\n      }\n\n      return true;\n    });\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}